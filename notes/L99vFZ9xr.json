{"title":"第7期","content":"## 2021/01/14\n\n## 每日资讯\n### 1. 提高10倍打包速度的神奇工具`snowpack`\n号称 无需打包工具（`Webpack，Parcel`）便能将代码结果实时展现在浏览器中\n- 启动时间不到 50ms，在大型项目中速度也不会打折扣。\n- 热更新速度非常快。\n- 构建时可以结合任何`bundler`，比如 `webpack`。\n- 内置支持`TS`、`JSX`、`CSS Module`、自定义路由、代理请求 等。\n- 支持自定义构建脚本以及三方插件。\n\n`snowpack`采用[`ESM import`](https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Statements/import)模块化加载方案,这使得本地构建不再需要处理模块化关系并聚合文件(比如基于 `vue` 的 `vite`也是基于`ESM import`的)\n\n`ESM import` 带来的最直观的改变有下面三点：\n\n- `node_modules` 完全不需要参与到构建过程，仅这一点就足以让构建效率提升至少 10 倍。\n- 模块化交给浏览器管理，修改任何组件都只需做单文件编译，时间复杂度永远是 `O(1)`，`reload`时间与项目大小无关。\n- 浏览器完全模块化加载文件，不存在资源重复加载问题，这种原生的`TreeShaking`还可以做到访问文件时再编译，做到单文件级别的按需构建。\n\n![](image-kjxl9nmz.png)\n\n此外`snowpack3.0`还新增了流式`NPM`导入\n做到完全跳过`npm install`步骤，而只是通过`ESM`导入按需获取相关的预构建软件包代码\n```js\n// you do this:\nimport * as React from 'react';\n\n// but get behavior like this:\nimport * as React from 'https://cdn.skypack.dev/react@17.0.1';\n```\n\n#### 风险\n- 项目生态存在非 ESM import 模块化包而导致大量适配成本的风险。\n- 项目存在大量 webpack 插件的 magic 魔法，导致标准化后丢失定制打包逻辑的风险\n\n#### 相关文章\n- [ESM import](https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Statements/import)\n- [Snowpack v3.0](https://www.snowpack.dev/posts/2021-01-13-snowpack-3-0)\n- [精读《snowpack》](https://zhuanlan.zhihu.com/p/144993158)\n- [提高10倍打包速度的神奇工具：Snowpack 2.0发布，再也不需要打包器](https://mp.weixin.qq.com/s/7Z8U6rGVIpy1R406mNqD6g)\n\n### 2. Talkr是面向React应用程序的超小型i18n提供程序\n\n- 自动检测浏览器语言\n- 根据任何语言自动检测复数规则\n- 具有多个键的动态翻译\n- 访问`json`翻译文件中的深层嵌套键\n\n#### 相关文章\n- [talker](https://www.npmjs.com/package/talkr)\n\n\n## 30 seconds of code\n### 目标\n根据给定的函数对数组的元素进行分组，并返回每个组中元素的计数\n\n### 样例输出: \n```js\ncountBy([6.1, 4.2, 6.3], Math.floor); // {4: 1, 6: 2}\ncountBy(['one', 'two', 'three'], 'length'); // {3: 2, 5: 1}\ncountBy([{ count: 5 }, { count: 10 }, { count: 5 }], x => x.count)\n// {5: 2, 10: 1}\n```\n\n### 参考实现\n```js\nconst countBy = (arr, fn) =>\n  arr.map(typeof fn === 'function' ? fn : val => val[fn]).reduce((acc, val) => {\n    acc[val] = (acc[val] || 0) + 1;\n    return acc;\n  }, {});\n```\n\n## 每日一问\n\n> 以下代码的运行结果是？\n\n```js\nconst info = {\n  [Symbol('a')]: 'b'\n}\n\nconsole.log(info)\nconsole.log(Object.keys(info))\n```\n\n- A &nbsp;&nbsp;`{Symbol('a'): 'b'}` and `[\"{Symbol('a')\"]` \n- B &nbsp;&nbsp;`{}` and `[]` \n- C &nbsp;&nbsp;`{ a: \"b\" }` and `[\"a\"]` \n- D &nbsp;&nbsp;`{Symbol('a'): 'b'}` and `[]` \n\n## 每日二问\n> 以下代码的`num`的值是？\n\n```js\nconst myPromise = () => Promise.resolve('I have resolved!')\n\nfunction firstFunction() {\n  myPromise().then(res => console.log(res))\n  console.log('1')\n}\n\nasync function secondFunction() {\n  console.log(await myPromise())\n  console.log('2')\n}\n\nfirstFunction()\nsecondFunction()\n```\n\n- A &nbsp;&nbsp;`I have resolved!`, `1` and `I have resolved!`, `2` \n- B &nbsp;&nbsp;`1`, `I have resolved!`, and `2`, `I have resolved!`\n- C &nbsp;&nbsp;`I have resolved!`, `1` and `2`, `I have resolved!`\n- D &nbsp;&nbsp;`1`, `I have resolved!` and `I have resolved!`, `2` \n### 昨天的答案\n#### 第一题\n- D\n![](image-kjwrsdqt.png)\n#### 第二题\n- D\n- 遇到不合法字符（`*`）就不解析了\n","tags":[],"folderPathname":"/weekly","data":{},"createdAt":"2021-02-22T06:59:05.139Z","updatedAt":"2021-02-23T01:50:53.146Z","trashed":false,"_id":"note:L99vFZ9xr","_rev":"6-d4b52074310cec033432a0a34b7641e1"}