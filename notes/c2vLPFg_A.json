{"_id":"note:c2vLPFg_A","title":"第60期","content":"## 2021/07/16\n## 每周资讯 - 第`60`期\n### 1. CSS 奇思妙想 | 巧妙的实现带圆角的三角形\n如何使用纯 CSS 实现带圆角的三角形呢？，像是这样：\n\n![](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/3e530cf2ac5d403d8f5cc4e03e8d25fe~tplv-k3u1fbpfcp-zoom-1.image)\n\n本文将介绍几种实现带圆角的三角形的实现方式。\n#### 法一. 全兼容的 SVG 大法\n想要生成一个带圆角的三角形，代码量最少、最好的方式是使用 SVG 生成。\n\n使用 SVG 的 多边形标签`<polygon>`生成一个三边形，使用 SVG 的`stroke-linejoin=\"round\"`生成连接处的圆角。\n代码量非常少，核心代码如下：\n\n```html\n<svg  width=\"250\" height=\"250\" viewBox=\"-50 -50 300 300\">\n  <polygon class=\"triangle\" stroke-linejoin=\"round\" points=\"100,0 0,200 200,200\"/>\n</svg>\n```\n```scss\n.triangle {\n    fill: #0f0;\n    stroke: #0f0;\n    stroke-width: 10;\n}\n```\n实际图形如下：\n\n![](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/12ee2b84034546388acf97bdf9689773~tplv-k3u1fbpfcp-zoom-1.image)\n\n这里，其实是借助了 SVG 多边形的`stroke-linejoin: round`属性生成的圆角，`stroke-linejoin`是什么？它用来控制两条描边线段之间，有三个可选值：\n\n- miter 是默认值，表示用方形画笔在连接处形成尖角\n- round 表示用圆角连接，实现平滑效果\n- bevel 连接处会形成一个斜接\n\n![](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/b82ca21398734144870a3c6cfbff5ac1~tplv-k3u1fbpfcp-zoom-1.image)\n\n我们实际是**通过一个带边框，且边框连接类型为`stroke-linejoin: round`的多边形生成圆角三角形的**。\n\n如果，我们把底色和边框色区分开，实际是这样的：\n\n```scss\n.triangle {\n    fill: #0f0;\n    stroke: #000;\n    stroke-width: 10;\n}\n```\n\n![](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/70313c08b8864a819b150e0a29be2428~tplv-k3u1fbpfcp-zoom-1.image)\n\n##### 通过 stroke-width 控制圆角大小\n那么如何控制圆角大小呢？也非常简单，通过控制`stroke-width`的大小，可以改变圆角的大小。\n\n当然，要保持三角形大小一致，在增大/缩小`stroke-width`的同时，需要缩小/增大图形的`width/height`：\n\n![](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/60c7c6569a184aec8744e0bfc6884dae~tplv-k3u1fbpfcp-zoom-1.image)\n\n完整的 DEMO 你可以戳这里：[CodePen Demo -- 使用 SVG 实现带圆角的三角形](https://codepen.io/Chokcoco/pen/eYWZvKo)\n\n#### 法二. 图形拼接\n不过，上文提到了，使用纯 CSS 实现带圆角的三角形，但是上述第一个方法其实是借助了 SVG。那么仅仅使用 CSS，有没有办法呢？\n\n当然，发散思维，CSS 有意思的地方正在于此处，用一个图形，能够有非常多种巧妙的解决方案！\n\n我们看看，一个圆角三角形，它其实可以被拆分成几个部分：\n\n![](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/99ee2beddb8a4672a8978ac869fca87f~tplv-k3u1fbpfcp-zoom-1.image)\n\n所以，其实我们只需要能够画出一个这样的带圆角的菱形，通过 3 个进行旋转叠加，就能得到圆角三角形：\n\n![](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/8b4f283b562044b2bdcde3b716d4d664~tplv-k3u1fbpfcp-zoom-1.image)\n\n##### 绘制带圆角的菱形\n那么，接下来我们的目标就变成了绘制一个带圆角的菱形，方法有很多，本文给出其中一种方式：\n\n1. 首先将一个正方形变成一个菱形，利用 transform 有一个固定的公式：\n\n![](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/97b710e7c2e7476f8bf2d99dfb1fd35c~tplv-k3u1fbpfcp-zoom-1.image)\n\n```html\n<div></div>\n```\n```scss\ndiv {\n    width:  10em;\n    height: 10em;\n    transform: rotate(-60deg) skewX(-30deg) scale(1, 0.866);\n}\n```\n\n![](https://user-images.githubusercontent.com/8554143/124758959-b23b8900-df61-11eb-9236-17f22071f155.gif)\n\n2. 将其中一个角变成圆角：\n```scss\ndiv {\n    width:  10em;\n    height: 10em;\n    transform: rotate(-60deg) skewX(-30deg) scale(1, 0.866);\n  + border-top-right-radius: 30%;\n}\n```\n![](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/b363c47eee294c6a8c81ea1a603fbe05~tplv-k3u1fbpfcp-zoom-1.image)\n\n至此，我们就顺利的得到一个带圆角的菱形了！\n\n##### 拼接 3 个带圆角的菱形\n接下来就很简单了，我们只需要利用元素的另外两个伪元素，再生成 2 个带圆角的菱形，将一共 3 个图形旋转位移拼接起来即可！\n\n完整的代码如下：\n```scss\ndiv{\n    position: relative;\n    background-color: orange;\n}\ndiv:before,\ndiv:after {\n    content: '';\n    position: absolute;\n    background-color: inherit;\n}\ndiv,\ndiv:before,\ndiv:after {\n    width:  10em;\n    height: 10em;\n    border-top-right-radius: 30%;\n}\ndiv {\n    transform: rotate(-60deg) skewX(-30deg) scale(1,.866);\n}\ndiv:before {\n    transform: rotate(-135deg) skewX(-45deg) scale(1.414, .707) translate(0,-50%);\n}\ndiv:after {\n    transform: rotate(135deg) skewY(-45deg) scale(.707, 1.414) translate(50%);\n}\n```\n\n就可以得到一个圆角三角形了！效果如下：\n\n完整的代码你可以戳这里：[CodePen Demo -- A triangle with rounded](https://codepen.io/Chokcoco/pen/vYmLVZr)\n\n#### 法三. 图形拼接实现渐变色圆角三角形\n完了吗？没有！\n上述方案，虽然不算太复杂，但是有一点还不算太完美的。就是无法支持渐变色的圆角三角形。像是这样：\n\n![](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/aa3f2ad68b4f4171994aa99b6e20833d~tplv-k3u1fbpfcp-zoom-1.image)\n\n如果需要实现渐变色圆角三角形，还是有点复杂的。但真就还有人鼓捣出来了，下述方法参考至 -- [How to make 3-corner-rounded triangle in CSS](https://stackoverflow.com/questions/14446677/how-to-make-3-corner-rounded-triangle-in-css)。\n\n同样也是利用了多块进行拼接，但是这次我们的基础图形，会非常的复杂。\n\n首先，我们需要实现这样一个容器外框，和上述的方法比较类似，可以理解为是一个圆角菱形（画出 border 方便理解）\n\n![](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/9060c3c0d6c74ef88c5cfe2fccca2a8d~tplv-k3u1fbpfcp-zoom-1.image)\n\n```scss\ndiv {\n    width: 200px;\n    height: 200px;\n    transform: rotate(30deg) skewY(30deg) scaleX(0.866);\n    border: 1px solid #000;\n    border-radius: 20%;\n}\n```\n接着，我们同样使用两个伪元素，实现两个稍显怪异的图形进行拼接，算是对 `transform`的各种用法的合集：\n\n```scss\ndiv::before,\ndiv::after {\n    content: \"\";\n    position: absolute;\n    width: 200px;\n    height: 200px;\n}\ndiv::before {\n    border-radius: 20% 20% 20% 55%;\n    transform: scaleX(1.155) skewY(-30deg) rotate(-30deg) translateY(-42.3%) skewX(30deg) scaleY(0.866) translateX(-24%);\n    background: red;\n}\ndiv::after {\n    border-radius: 20% 20% 55% 20%;\n    background: blue;\n    transform: scaleX(1.155) skewY(-30deg) rotate(-30deg) translateY(-42.3%) skewX(-30deg) scaleY(0.866) translateX(24%);\n}\n```\n\n为了方便理解，制作了一个简单的变换动画\n\n![](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/eaba708ed065443faa1a980a2d4ec616~tplv-k3u1fbpfcp-zoom-1.image)\n\n本质就是实现了这样一个图形：\n![](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/0b104e7d14ce46f7afc71da85f299bd5~tplv-k3u1fbpfcp-zoom-1.image)\n\n最后，给父元素添加一个 overflow: hidden 并且去掉父元素的 border 即可得到一个圆角三角形：\n\n![](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/a85229c5bda04633ba94a80848830e3f~tplv-k3u1fbpfcp-zoom-1.image)\n\n由于这两个元素重叠空间的特殊结构，此时，给两个伪元素添加同一个渐变色，会完美的叠加在一起：\n\n```scss\ndiv::before,\ndiv::after, {\n    background: linear-gradient(#0f0, #03a9f4);\n}\n```\n最终得到一个渐变圆角三角形：\n\n![](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/644b10a305cf45e8b3962d2771e18fdc~tplv-k3u1fbpfcp-zoom-1.image)\n\n上述各个图形的完整代码，你可以戳这里：[CodePen Demo -- A triangle with rounded and gradient background](https://codepen.io/Chokcoco/pen/LYyGRpV)\n\n####最后\n本文介绍了几种在 CSS 中实现带圆角三角形的方式，虽然部分有些繁琐，但是也体现了 CSS ”有趣且折磨人“ 的一面，具体应用的时候，还是要思考一下，对是否使用上述方式进行取舍，有的时候，切图也许是更好的方案。\n\n#### 相关文章\n- [CSS 奇思妙想 | 巧妙的实现带圆角的三角形](https://juejin.cn/post/6984599136842547213)\n- [CodePen Demo -- 使用 SVG 实现带圆角的三角形](https://codepen.io/Chokcoco/pen/eYWZvKo)\n- [CodePen Demo -- A triangle with rounded](https://codepen.io/Chokcoco/pen/vYmLVZr)\n- [How to make 3-corner-rounded triangle in CSS](https://stackoverflow.com/questions/14446677/how-to-make-3-corner-rounded-triangle-in-css)\n- [CodePen Demo -- A triangle with rounded and gradient background](https://codepen.io/Chokcoco/pen/LYyGRpV)\n\n\n### 2. 从场景倒推我们要什么样的微前端体系\n这篇文章面向的是还没有在业务中使用过微前端的同学或团队，通过这篇概览，可以简单的建立对“微前端”的整体认知。\n#### 相关文章\n- [从场景倒推我们要什么样的微前端体系](https://mp.weixin.qq.com/s/Xb-P9ubzrXGmtTE8xhK8TQ)\n\n## 30 seconds of code\n### 目标\n返回给定秒数的ISO格式\n\n### 样例输出: \n```js\nconst formatSeconds = s => {\n  const [hour, minute, second, sign] =\n    s > 0\n      ? [s / 3600, (s / 60) % 60, s % 60, '']\n      : [-s / 3600, (-s / 60) % 60, -s % 60, '-'];\n\n  return (\n    sign +\n    [hour, minute, second]\n      .map(v => `${Math.floor(v)}`.padStart(2, '0'))\n      .join(':')\n  );\n};\n```\n### 参考实现\n```js\nformatSeconds(200); // '00:03:20'\nformatSeconds(-200); // '-00:03:20'\nformatSeconds(99999); // '27:46:39'\n```\n## 每日一问\n> 以下代码的运行结果为\n\n```js   \nString('11') == new String('11');\nString('11') === new String('11');\n```\n\n## 每日二问\n> 以下代码的运行结果为\n\n```js  \n// example 1\nvar a={}, b='123', c=123;  \na[b]='b';\na[c]='c';  \nconsole.log(a[b]);\n\n---------------------\n// example 2\nvar a={}, b=Symbol('123'), c=Symbol('123');  \na[b]='b';\na[c]='c';  \nconsole.log(a[b]);\n\n---------------------\n// example 3\nvar a={}, b={key:'123'}, c={key:'456'};  \na[b]='b';\na[c]='c';  \nconsole.log(a[b]);\n```\n\n### 上期的答案\n## 每日一问\n> 以下代码的运行结果为\n\n```js  \nvar a = 10;\n(function () {\n    console.log(a)\n    a = 5\n    console.log(window.a)\n    var a = 20;\n    console.log(a)\n})()\n```\n- undefined -> 10 -> 20\n## 每日二问\n> 以下代码的运行结果为\n\n```js    \nvar obj = {\n    '2': 3,\n    '3': 4,\n    'length': 2,\n    'splice': Array.prototype.splice,\n    'push': Array.prototype.push\n}\nobj.push(1)\nobj.push(2)\nconsole.log(obj)\n```\n\n- [题解](https://github.com/Advanced-Frontend/Daily-Interview-Question/issues/76)","tags":[],"folderPathname":"/weekly","data":{},"createdAt":"2021-07-15T14:10:21.191Z","updatedAt":"2021-07-15T14:43:21.248Z","trashed":false,"_rev":"04Lh_4M45"}