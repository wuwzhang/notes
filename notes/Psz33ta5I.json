{"_id":"note:Psz33ta5I","title":"功能点","content":"### 技术栈\n- Nest.js，底层封装Express，开箱即用，是是 Node.js 版的 Spring 框架\n  - 基于TS的web框架，可以进行严格的类型定义\n  - 自动生成Swagger文档\n  - 目录结构清晰，代码可复用性强\n  - 层层处理，一定程度上可以约束代码，比如何时使用中间件、何时需要使用guards守卫等\n  - 项目结构、命令行与angular类似\n\n### 目录\n```js\nMyProject\n├── src              // TypeScript 代码\n│   ├── entity       // 存储实体（数据库模型）的位置\n│   │   └── User.ts  // 示例 entity\n│   ├── migration    // 存储迁移的目录\n│   └── index.ts     // 程序执行主文件\n├── .gitignore       // gitignore文件\n├── ormconfig.json   // ORM和数据库连接配置\n├── package.json     // node module 依赖\n├── README.md        // 简单的 readme 文件\n└── tsconfig.json    // TypeScript 编译选项\n```\n\n### 功能点\n> 作为后端所需功能点能全覆盖\n\n - [x] *api 约束，接口包装\n   - [x] api.interceptor\n - [x] *输入输出校验\n   - [x] class-validator\n   - [x] class-transformer\n - [x] *异常处理\n   - [x] 自定义异常\n   - [x] all-exceptions.filter\n   - [x] timeout.terceptor\n - [X] *接口文档 - swagger\n   - [x] auth - headers\n   - [x] tags - 分类\n   - [x] schemas\n - [x] config配置\n   - [x] key\n - [ ] *文件处理\n   - [x] 普通文件上传\n   - [x] 虚拟路径\n   - [x] 多文件上传\n   - [ ] 流文件处理\n   - [x] 打包压缩\n   - [x] 下载\n - [x] cache\n - [ ] *部署\n   - [x] pm2\n   - [ ] 数据库迁移\n   - [ ] docker\n - [x] cookie/session\n - [x] HTTP模块 axios\n - [ ] 监控\n   - [x] nest-status-monitor nestv7未更新，不可用\n   - [ ] 健康检查\n\n - [x] 日志\n   - [x] 模块封装（控制台，requestId、timestamp、stack、url、ip、user）\n   - [x] 输出文件\n - [ ] 断点调试\n - [ ] 单元测试\n - [ ] 队列\n - [ ] 定时任务\n - [ ] websocket\n - [ ] 模板渲染\n - [ ] 数据库\n   - [x] mysql\n     - [x] typeorm\n   - [ ] redis\n - [ ] 安全\n   - [X] *权限认证（JWT）\n   - [x] local - strategy\n   - [x] jwt - strategy\n   - [x] refresh - strategy\n   - [x] role\n   - [ ] 加密、散列\n   - [x] Helmet (可以避免众所周知的 Web 漏洞)\n   - [x] express-rate-limit 限速\n - [ ] 微服务\n - [ ] README\n\n_打勾为已验证功能_\n\n### BFF层需要实现功能\n- [ ] 后端对接\n- [x] 接口包装\n- [ ] 前端对接\n- [ ] 缓存\n- [x] 权限认证（需要做吗）\n- [ ] 安全\n- [ ] 部署、运维\n\n### 主要问题\n- 怎么跟后端对接，需要哪些\n- 实现的功能点有哪些，明确要实现的内容\n- 运维部署问题需要调研吗\n\n### 资料\n- [nest文档](https://docs.nestjs.cn/8/introduction)\n\n### 工具\n- vscode\n- postman\n\n\n## 部署\n地址：47.111.95.51\n账号：root\nmima：CC@@11cc\n\n```bash\nssh username@host\nwget https://nodejs.org/dist/v12.14.1/node-v12.14.1-linux-x64.tar.xz\ntar xvf node-v12.14.1-linux-x64.tar.xz\nln -s /root/node-v12.14.1-linux-x64/bin/node /usr/local/bin/node\nln -s /root/node-v12.14.1-linux-x64/bin/npm /usr/local/bin/npm\n```","tags":[],"folderPathname":"/end/bff","data":{},"createdAt":"2021-07-22T06:38:58.979Z","updatedAt":"2021-08-20T03:44:17.061Z","trashed":false,"_rev":"PKoC_-v9c"}