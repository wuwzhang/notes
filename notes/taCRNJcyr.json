{"title":"建议","content":"## 页面结构\n- 页面结构过深，同一个page下来回包裹（container包裹component）, `redux`写法繁琐 是否考虑采用类似`dva`的装饰器写法，就不需要在额外使用页面包裹，同时`dva`是采用`redux-sage`较`react-thunk`更多支持功能，如取消异步操作、监听异步操作等（如果更激进一点 其实更推荐`Recoil`采用hook的写法 实现数据管理）\n- 有些如果不需要用到redux的页面，就显得过于繁琐\n- `request` 单独创建`service`文件夹 请求`api`单独管理\n```jsx\n\n// page\n@connect(({ group, loading, menu }) => ({\n  list: group.list || {},\n  loading: loading.effects['group/queryPage'],\n}))\nclass Group extends Component<IProps, IState> {\n\t...\n}\n\t\nexport default Group\n\t\n// model\nimport { queryPage } from './service';\n\nexport default {\n  namespace: 'group',\n\n  state: {\n    list: { data: [] },\n  },\n\n  effects: {\n    *queryPage({ payload }, { call, put, select }) {\n      const cond = yield select(state => state.group.cond);\n      const params = { ...payload, ...cond };\n      const { list = [], total } = yield call(queryPage, params);\n      yield put({ type: 'setPage', payload: { list, total } })\n    },\n\t\t// ...\n  },\n\n  reducers: {\n\t  //\t...\n    setPage(state, action) {\n      return {\n        ...state,\n        list: {\n          data: action.payload.list,\n          dataCnt: action.payload.total\n        }\n      }\n    },\n  }\n}\n\n```\n- 语义不明确， components自然语义下放置组件更为合适 能否考虑改为`/page/index` `/page/add` `page/$id/detail`\n\n## 样式\n- 建议修改antd的样式使用less，其他推荐`styled-components`\n  - 模式：css in js\n  - 优势：支持多变量、继承、mixin、主题模式等，能直接包裹元素，按模块导出易于复用\n  - 对于antd的样式修改，建议还是保留css，对于较复杂的样式建议styled-components\n\n```js\nimport img from '@/assect/image/image`\nexport const MyButton = styled(Button)`\n\tbackground-image: ${img};\n`\n\nexport const accordion = (\n\t{ type }: { type: 'collapsed' | 'expanded' }\n) => css`\n  overflow: hidden;\n  &::before {\n    content: ${type};\n  }\n  ${type === 'collapsed'\n    ? `\n    max-height: 0;\n    transition: max-height 0.5s cubic-bezier(0, 1, 0, 1);\n  `\n    : `\n    max-height: 100vh;\n    transition: max-height 0.5s;\n  `}\n`;\n```\n\n## block\n- 建议对于通用页面（组件的组合页面，如列表页）的封装， 采用配置表的形式使用（类似umi-block，如pro-table）提高开发效率\n\n## 文档\n- 建议引入`storybook`或`mdx`等\n  - 优势：支持`jsx`语法、支持参数调试、能形成自己的组件库文档\n\n## 语义化\n- 模块内的函数减少具体的模块名 如（queryDeptPage -> queryPage）\n\t- 优势：容易进行移植\n- HTML节点语义化\n\n## 高效的图片压缩\n- [https://tinypng.com/](强烈推荐https://tinypng.com/)\n- [https://zhitu.isux.us/](智图https://zhitu.isux.us/)","tags":[],"folderPathname":"/ml-doc","data":{},"createdAt":"2020-11-19T03:07:54.389Z","updatedAt":"2020-11-19T03:45:49.344Z","trashed":false,"_id":"note:taCRNJcyr","_rev":"85-e03bdae16f386955730a8c4b84b0122a"}