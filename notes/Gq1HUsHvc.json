{"title":"第10期","content":"## 2021/01/20\n\n## 每日资讯\n### 1. 你不知道的CSS变量\n> 最近看到Vue3新增了一条试验性的属性[单文件组件状态驱动的 CSS 变量](https://github.com/vuejs/rfcs/blob/sfc-improvements/active-rfcs/0000-sfc-style-variables.md)，那今天就来讲一讲`CSS`变量吧\n\n`CSS`变量又称`CSS`自定义属性，是`CSS`作者定义的一个标准规范, 它包含的值可以在整个文档中重复使用。\n\n使用`--`来定义变量，对大小写敏感(`@`被`less`用掉了, `$`被`sass`用掉了，为避免冲突就使用`--`了), 使用`var()`函数来获取, 支持声明全局变量和局部变量\n\n```css\n// 全局变量\n:root {\n  --primary: #00ffff;\n}\n\n// 局部变量\n.demo {\n  --demo-bg: #ff0;\n}\n\n\n// 使用\n.demo {\n  background: var(--demo-bg);\n  color: var(--primary);\n}\n```\n\n#### 那它能用来做些什么呢\n\n##### 响应式布局\n```css\nbody {\n  --primary: #7F583F;\n  --secondary: #F7EFD2;\n}\n\na {\n  color: var(--primary);\n  text-decoration-color: var(--secondary);\n}\n\n@media screen and (min-width: 768px) {\n  body {\n    --primary:  #F7EFD2;\n    --secondary: #7F583F;\n  }\n}\n```\n\n#### 简化js对dom设置的介入\n- 一个`div`元素实现进度条\n```html\n<div class=\"bar\" style=\"--percent: 60;\" />\n```\n```css\n.bar {\n  height: 20px; width: 300px;\n  background-color: #f5f5f5;\n}\n.bar::before {\n  counter-reset: progress var(--percent);\n  content: counter(progress) '%\\2002';\n  display: block;\n  width: calc(300px * var(--percent) / 100);\n  font-size: 12px;\n  height: 20px;\n  line-height: 20px;\n  color: #fff;\n  background-color: #2486ff;\n  text-align: right;\n  white-space: nowrap;\n  overflow: hidden;\n}\n\n```\n![](image-kk44o8cs.png)\n\n- 在`React`中使用`CSS`变量实现加载动画\n```js\nconst Loading = () => (\n  <ul>\n    {\n      [...new Array(6).keys()].map((i) => {\n        const style = { '--line-index': (ind + 1) } as React.CSSProperties\n        return (\n          <li style={style} key={i.toString()} />\n        )\n      })\n    }\n  </ul>\n)\n```\n\n```css\n.strip-loading {\n    width: 200px;\n    height: 200px;\n    li {\n        --time: calc((var(--line-index) - 1) * 200ms);\n        border-radius: 3px;\n        width: 6px;\n        height: 30px;\n        background-color: #f66;\n        animation: beat 1.5s ease-in-out var(--time) infinite;\n        & + li {\n            margin-left: 5px;\n        }\n    }\n}\n```\n![](https://user-gold-cdn.xitu.io/2020/3/19/170f3856cf748b1c?imageslim)\n- 点击页面任意部分，出现跟随文字`hello ~`\n```css\nbody:active::after {\n  transform: translate(-50%, -100%);\n  opacity: 1;\n  transition: 0s;\n  left: -10000px;\n}\nbody::after {\n  content: 'hello ~';\n  position:fixed;\n  z-index: 999;\n  left: calc(var(--clientx, -10000) * 1px);\n  top: calc(var(--clienty, -10000) * 1px);\n  transform: translate(-50%, calc(-100% - 20px));\n  opacity: 0;\n  transition: transform .3s, opacity .5s;\n}\n```\n```js\ndocument.addEventListener('mousedown', function (event) {\n  var html = document.documentElement;\n  html.style.setProperty('--clientx', event.clientX);\n  html.style.setProperty('--clienty', event.clientY);\n});\n```\n\n- hover动画实现\n\n```css\n.button {\n  position: relative;\n  appearance: none;\n  background: #f72359;\n  padding: 1em 2em;\n  border: none;\n  color: white;\n  font-size: 1.2em;\n  cursor: pointer;\n  outline: none;\n  overflow: hidden;\n  border-radius: 100px;\n\n  &::before {\n    --size: 0;  \n\n    content: '';\n    position: absolute;\n    left: var(--x);\n    top: var(--y);\n    width: var(--size);\n    height: var(--size);\n    background: radial-gradient(circle closest-side, #4405f7, transparent);\n    transform: translate(-50%, -50%);\n    transition: width .2s ease, height .2s ease;\n  }\n\n  &:hover::before {\n    --size: 400px;\n  }\n}\n```\n![](https://user-gold-cdn.xitu.io/2019/4/25/16a53ca76ffec26a?imageslim)\n#### 实现主题定制\n- [精读《使用 css 变量生成颜色主题》](https://github.com/dt-fe/weekly/blob/v2/118.%E7%B2%BE%E8%AF%BB%E3%80%8A%E4%BD%BF%E7%94%A8%20css%20%E5%8F%98%E9%87%8F%E7%94%9F%E6%88%90%E9%A2%9C%E8%89%B2%E4%B8%BB%E9%A2%98%E3%80%8B.md)\n- [CSS Variables for React Devs](https://www.joshwcomeau.com/css/css-variables-for-react-devs/#getting-and-setting)\n\n#### 相关文章\n- [CSS变量对JS交互组件开发带来的提升与变革 - 张鑫旭](https://www.zhangxinxu.top/wordpress/2020/07/css-var-improve-components/)\n- [CSS 变量教程 - 阮一峰](https://www.ruanyifeng.com/blog/2017/05/css-variables.html)\n- [妙用CSS变量，让你的CSS变得更心动](https://juejin.cn/post/6844904084936327182)\n- [利用CSS变量实现炫酷的悬浮效果](https://juejin.cn/post/6844903830551789575)\n\n## 30 seconds of code\n### 目标\n按指定长度给数组组分\n\n### 样例输出: \n```js\nchunk([1, 2, 3, 4, 5], 2); // [[1, 2], [3, 4], [5]]\n```\n\n### 参考实现\n```js\nconst chunk = (arr, size) =>\n  Array.from({ length: Math.ceil(arr.length / size) }, (v, i) =>\n    arr.slice(i * size, i * size + size)\n  );\n```\n\n## 每日一问\n\n> `iframe`有那些缺点？\n\n## 每日二问\n> `link` 与 `@import` 的区别\n\n### 昨天的答案\n#### 第一题\n- D\n- 在`ES2020`中，通过`#`可以给`class`添加私有变量, 外部无法获取\n\n#### 第二题\n- A\n- `updateEmail` 函数是一个箭头函数，它没有和 `user` 对象绑定。这就意味着 `this` 关键字不会引用到 `user` 对象，但是会引用到全局对象。","tags":[],"folderPathname":"/weekly","data":{},"createdAt":"2021-02-22T07:03:05.320Z","updatedAt":"2021-02-22T07:14:00.860Z","trashed":false,"_id":"note:Gq1HUsHvc","_rev":"4-9784ed8dc47b8c5f870c27a7bf5a86d4"}