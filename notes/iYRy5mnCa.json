{"_id":"note:iYRy5mnCa","title":"ç¬¬29æœŸ","content":"# 2021/03/25\n## æ¯å‘¨èµ„è®¯ - ç¬¬`29`æœŸ\n### 1. [ä¸€æ–‡åƒé€`React`é«˜é˜¶ç»„ä»¶(`HOC`) (ä¸Š)](https://juejin.cn/post/6940422320427106335)\n_æœ¬æ–‡æ˜¯åœ¨æ˜¯å¤ªé•¿äº†ï¼Œåˆ†ä¸Šä¸‹ä¸¤ç¯‡è½¬è½½, ä¸Šç¯‡ä¸»è¦æ˜¯å¯¹é«˜é˜¶å‡½æ•°çš„åŸºç¡€ä»‹ç»ï¼Œä¸‹ç¯‡ä¸»è¦ä¸ºå®æˆ˜ï¼Œæœ‰å¤§é‡ä¼˜ç§€çš„demo_\n> é«˜é˜¶ç»„ä»¶ï¼ˆ`HOC`ï¼‰æ˜¯`React`ä¸­ç”¨äºå¤ç”¨ç»„ä»¶é€»è¾‘çš„ä¸€ç§é«˜çº§æŠ€å·§ã€‚`HOC`è‡ªèº«ä¸æ˜¯ `React API`çš„ä¸€éƒ¨åˆ†ï¼Œå®ƒæ˜¯ä¸€ç§åŸºäº`React`çš„ç»„åˆç‰¹æ€§è€Œå½¢æˆçš„è®¾è®¡æ¨¡å¼ã€‚\n\næˆ‘ä»¬å¸¦ç€ä»¥ä¸‹å‡ ä¸ªé—®é¢˜æ¥è®¨è®ºï¼š\n\n1. ä»€ä¹ˆæ˜¯é«˜é˜¶ç»„ä»¶ï¼Œå®ƒè§£å†³äº†ä»€ä¹ˆé—®é¢˜ï¼Ÿ\n2. æœ‰å‡ ç§é«˜é˜¶ç»„ä»¶ï¼Œå®ƒä»¬ä¼˜ç¼ºç‚¹æ˜¯ä»€ä¹ˆï¼Ÿ\n3. å¦‚ä½•å†™ä¸€ä¸ªä¼˜ç§€é«˜é˜¶ç»„ä»¶ï¼Ÿ\n4. `HOC`æ€ä¹ˆå¤„ç†é™æ€å±æ€§ï¼Œè·¨å±‚çº§`ref`ç­‰é—®é¢˜ï¼Ÿ\n5. é«˜é˜¶ç»„ä»¶æ€ä¹ˆæ§åˆ¶æ¸²æŸ“ï¼Œéš”ç¦»æ¸²æŸ“ï¼Ÿ\n6. é«˜é˜¶ç»„ä»¶æ€ä¹ˆç›‘æ§åŸå§‹ç»„ä»¶çš„çŠ¶æ€ï¼Ÿ\n\n![](https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/7b05e1efc4e84808a0bb84c9cac4ab4b~tplv-k3u1fbpfcp-watermark.image)\n\n#### å‡ ç§åŒ…è£…å¼ºåŒ–ç»„ä»¶çš„æ–¹å¼\n##### 1. mixin æ¨¡å¼\n![](https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/faee9aa3049e4eb388ed76db4a8b6e64~tplv-k3u1fbpfcp-watermark.image)\n\nè€ç‰ˆæœ¬çš„`react-mixins`\nåœ¨`react`åˆæœŸæä¾›ä¸€ç§ç»„åˆæ–¹æ³•ã€‚é€šè¿‡`React.createClass`,åŠ å…¥`mixins`å±æ€§ï¼Œå…·ä½“ç”¨æ³•å’Œ`vue`ä¸­`mixins`ç›¸ä¼¼ã€‚å…·ä½“å®ç°å¦‚ä¸‹ï¼š\n\n```jsx\nconst customMixin = {\n  componentDidMount(){\n    console.log( '------componentDidMount------' )\n  },\n  say(){\n    console.log(this.state.name)\n  }\n}\n\nconst APP = React.createClass({\n  mixins: [ customMixin ],\n  getInitialState(){\n    return {\n      name:'alien'\n    }\n  },\n  render(){\n    const { name  } = this.state\n    return <div> hello ,world , my name is { name } </div>\n  }\n})\n```\n\nè¿™ç§`mixins`åªèƒ½å­˜åœ¨`createClass`ä¸­ï¼Œåæ¥`React.createClass`è¿åŒ`mixins`è¿™ç§æ¨¡å¼è¢«åºŸå¼ƒäº†ã€‚`mixins`ä¼šå¸¦æ¥ä¸€äº›è´Ÿé¢çš„å½±å“ã€‚\n\n1. `mixin`å¼•å…¥äº†éšå¼ä¾èµ–å…³ç³»ã€‚\n2. ä¸åŒ`mixins`ä¹‹é—´å¯èƒ½ä¼šæœ‰å…ˆåé¡ºåºç”šè‡³ä»£ç å†²çªè¦†ç›–çš„é—®é¢˜\n3. `mixin`ä»£ç ä¼šå¯¼è‡´æ»šé›ªçƒå¼çš„å¤æ‚æ€§\n\n`createClass`çš„åºŸå¼ƒï¼Œä¸ä»£è¡¨`mixin`æ¨¡å¼é€€å‡º`react`èˆå°ï¼Œåœ¨æœ‰çŠ¶æ€ç»„ä»¶`class`ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡åŸå‹é“¾ç»§æ‰¿æ¥å®ç°`mixins`ã€‚\n\n##### 2. extendsç»§æ‰¿æ¨¡å¼\n![](https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/4e95476ddca44d2a88f21d97828030da~tplv-k3u1fbpfcp-watermark.image)\n\nåœ¨`class`ç»„ä»¶ç››è¡Œä¹‹åï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡ç»§æ‰¿çš„æ–¹å¼è¿›ä¸€æ­¥çš„å¼ºåŒ–æˆ‘ä»¬çš„ç»„ä»¶ã€‚è¿™ç§æ¨¡å¼çš„å¥½å¤„åœ¨äºï¼Œå¯ä»¥å°è£…åŸºç¡€åŠŸèƒ½ç»„ä»¶ï¼Œç„¶åæ ¹æ®éœ€è¦å»`extends`æˆ‘ä»¬çš„åŸºç¡€ç»„ä»¶ï¼ŒæŒ‰éœ€å¼ºåŒ–ç»„ä»¶ï¼Œä½†æ˜¯å€¼å¾—æ³¨æ„çš„æ˜¯ï¼Œå¿…é¡»è¦å¯¹åŸºç¡€ç»„ä»¶æœ‰è¶³å¤Ÿçš„æŒæ¡ï¼Œå¦åˆ™ä¼šé€ æˆä¸€äº›åˆ—æ„æƒ³ä¸åˆ°çš„æƒ…å†µå‘ç”Ÿã€‚\n\n```jsx\nclass Base extends React.Component {\n  constructor() {\n    super()\n    this.state = {\n      name:'alien'\n    }\n  }\n  \n  say() {\n    console.log('base components')\n  }\n  \n  render() {\n    return (\n      <div> \n          hello,world \n          <button onClick={ this.say.bind(this) } >ç‚¹å‡»</button>\n      </div>\n    )\n  }\n}\n\nclass Index extends Base{\n  componentDidMount() {\n    console.log( this.state.name )\n  }\n  \n  say() { /* ä¼šè¦†ç›–åŸºç±»ä¸­çš„ say  */\n    console.log('extends components')\n  }\n}\n\nexport default Index\n```\n\n##### 3. HOCæ¨¡å¼\n![](https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/6b3c20e2a97e4a26814a70161edc96b1~tplv-k3u1fbpfcp-watermark.image)\n\n`HOC`æ˜¯æˆ‘ä»¬æœ¬ç« ä¸»è¦çš„è®²çš„å†…å®¹ï¼Œå…ˆç®€å•å°è¯•ä¸€ä¸ª`HOC`ã€‚\n\n```jsx\nfunction HOC(Component) {\n  return class wrapComponent extends React.Component {\n     constructor() {\n       super()\n       this.state = {\n         name:'alien'\n       }\n     }\n     render = () => <Component { ...this.props } { ...this.state }/>\n  }\n}\n\n@HOC\nclass Index extends React.Component {\n  say() {\n    const { name } = this.props\n    console.log(name)\n  }\n  render() {\n    return (\n      <div> \n        hello,world \n        <button onClick={this.say.bind(this)}>ç‚¹å‡»</button>\n      </div>\n    )\n  }\n}\n```\n\n##### 4. è‡ªå®šä¹‰hooksæ¨¡å¼\n![](https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/bcaaa5ce7b5445fdab823bf385caf5e6~tplv-k3u1fbpfcp-watermark.image)\n\n`hooks`çš„è¯ç”Ÿï¼Œä¸€å¤§éƒ¨åˆ†åŸå› æ˜¯è§£å†³**æ— çŠ¶æ€ç»„ä»¶æ²¡æœ‰`state`å’Œé€»è¾‘éš¾ä»¥å¤ç”¨é—®é¢˜**ã€‚`hooks`å¯ä»¥å°†ä¸€æ®µé€»è¾‘å°è£…èµ·æ¥ï¼Œåšåˆ°å¼€ç®±å³ç”¨ã€‚\n\nä¼ é€é—¨ï¼š\n\n[ç©è½¬react-hooks,è‡ªå®šä¹‰hooksè®¾è®¡æ¨¡å¼åŠå…¶å®æˆ˜](https://juejin.cn/post/6890738145671938062)\n\n[react-hookså¦‚ä½•ä½¿ç”¨ï¼Ÿ](https://juejin.cn/post/6864438643727433741)\n\n\n#### é«˜é˜¶ç»„ä»¶äº§ç”Ÿåˆè¡·\nç»„ä»¶æ˜¯æŠŠ`prop`æ¸²æŸ“æˆ`UI`,è€Œé«˜é˜¶ç»„ä»¶æ˜¯å°†ç»„ä»¶è½¬æ¢æˆå¦å¤–ä¸€ä¸ªç»„ä»¶ï¼Œæˆ‘ä»¬æ›´åº”è¯¥æ³¨æ„çš„æ˜¯ï¼Œç»è¿‡åŒ…è£…åçš„ç»„ä»¶ï¼Œè·å¾—äº†é‚£äº›å¼ºåŒ–,èŠ‚çœå¤šå°‘é€»è¾‘ï¼Œæˆ–æ˜¯è§£å†³äº†åŸæœ‰ç»„ä»¶çš„é‚£äº›ç¼ºé™·ï¼Œè¿™å°±æ˜¯é«˜é˜¶ç»„ä»¶çš„æ„ä¹‰ã€‚æˆ‘ä»¬å…ˆæ¥æ€è€ƒä¸€ä¸‹é«˜é˜¶ç»„ä»¶ç©¶ç«Ÿè§£å†³äº†ä»€ä¹ˆé—®é¢˜ğŸ¤”ğŸ¤”ğŸ¤”ï¼Ÿ\n\n1. å¤ç”¨é€»è¾‘ï¼šé«˜é˜¶ç»„ä»¶æ›´åƒæ˜¯ä¸€ä¸ªåŠ å·¥`react`ç»„ä»¶çš„å·¥å‚ï¼Œæ‰¹é‡å¯¹åŸæœ‰ç»„ä»¶è¿›è¡ŒåŠ å·¥ï¼ŒåŒ…è£…å¤„ç†ã€‚æˆ‘ä»¬å¯ä»¥æ ¹æ®ä¸šåŠ¡éœ€æ±‚å®šåˆ¶åŒ–ä¸“å±çš„`HOC`,è¿™æ ·å¯ä»¥è§£å†³å¤ç”¨é€»è¾‘ã€‚\n2. å¼ºåŒ–`props`ï¼šè¿™ä¸ªæ˜¯`HOC`æœ€å¸¸ç”¨çš„ç”¨æ³•ä¹‹ä¸€ï¼Œé«˜é˜¶ç»„ä»¶è¿”å›çš„ç»„ä»¶ï¼Œå¯ä»¥åŠ«æŒä¸Šä¸€å±‚ä¼ è¿‡æ¥çš„`props`,ç„¶åæ··å…¥æ–°çš„`props`,æ¥å¢å¼ºç»„ä»¶çš„åŠŸèƒ½ã€‚ä»£è¡¨ä½œ`react-router`ä¸­çš„`withRouter`ã€‚\n3. èµ‹èƒ½ç»„ä»¶ï¼š`HOC`æœ‰ä¸€é¡¹ç‹¬ç‰¹çš„ç‰¹æ€§ï¼Œå°±æ˜¯å¯ä»¥ç»™è¢«`HOC`åŒ…è£¹çš„ä¸šåŠ¡ç»„ä»¶ï¼Œæä¾›ä¸€äº›æ‹“å±•åŠŸèƒ½ï¼Œæ¯”å¦‚è¯´é¢å¤–çš„ç”Ÿå‘½å‘¨æœŸï¼Œé¢å¤–çš„äº‹ä»¶ï¼Œä½†æ˜¯è¿™ç§`HOC`ï¼Œå¯èƒ½éœ€è¦å’Œä¸šåŠ¡ç»„ä»¶ç´§å¯†ç»“åˆã€‚å…¸å‹æ¡ˆä¾‹`react-keepalive-router`ä¸­çš„`keepaliveLifeCycle`å°±æ˜¯é€šè¿‡`HOC`æ–¹å¼ï¼Œç»™ä¸šåŠ¡ç»„ä»¶å¢åŠ äº†é¢å¤–çš„ç”Ÿå‘½å‘¨æœŸã€‚\n4. æ§åˆ¶æ¸²æŸ“ï¼šåŠ«æŒæ¸²æŸ“æ˜¯`hoc`ä¸€ä¸ªç‰¹æ€§ï¼Œåœ¨`wrapComponent`åŒ…è£…ç»„ä»¶ä¸­ï¼Œå¯ä»¥å¯¹åŸæ¥çš„ç»„ä»¶ï¼Œè¿›è¡Œæ¡ä»¶æ¸²æŸ“ï¼ŒèŠ‚æµæ¸²æŸ“ï¼Œæ‡’åŠ è½½ç­‰åŠŸèƒ½ï¼Œåé¢ä¼šè¯¦ç»†è®²è§£ï¼Œå…¸å‹ä»£è¡¨åš`react-redux`ä¸­`connect`å’Œ`dva`ä¸­`dynamic`ç»„ä»¶æ‡’åŠ è½½ã€‚\n\næˆ‘ä¼šé’ˆå¯¹é«˜é˜¶ç»„ä»¶çš„åˆè¡·å±•å¼€ï¼Œè¯¦ç»†ä»‹ç»å…¶åŸç†å·²ç»ç”¨æ³•ã€‚è·Ÿä¸Šæˆ‘çš„æ€è·¯ï¼Œæˆ‘ä»¬å…ˆæ¥çœ‹ä¸€ä¸‹ï¼Œé«˜é˜¶ç»„ä»¶**å¦‚ä½•åœ¨æˆ‘ä»¬çš„ä¸šåŠ¡ç»„ä»¶ä¸­ä½¿ç”¨çš„**ã€‚\n\n#### é«˜é˜¶ç»„ä»¶ä½¿ç”¨å’Œç¼–å†™ç»“æ„\n\n##### ä½¿ç”¨ï¼šè£…é¥°å™¨æ¨¡å¼å’Œå‡½æ•°åŒ…è£¹æ¨¡å¼\nå¯¹äº`class`å£°æ˜çš„æœ‰çŠ¶æ€ç»„ä»¶ï¼Œæˆ‘ä»¬å¯ä»¥ç”¨è£…é¥°å™¨æ¨¡å¼ï¼Œå¯¹ç±»ç»„ä»¶è¿›è¡ŒåŒ…è£…ï¼š\n```jsx\n@withStyles(styles)\n@withRouter\n@keepaliveLifeCycle\nclass Index extends React.Componen {\n    /* ... */\n}\n```\næˆ‘ä»¬è¦æ³¨æ„ä¸€ä¸‹åŒ…è£…é¡ºåºï¼Œè¶Šé è¿‘Indexç»„ä»¶çš„ï¼Œå°±æ˜¯è¶Šå†…å±‚çš„HOC,ç¦»ç»„ä»¶Indexä¹Ÿå°±è¶Šè¿‘ã€‚\n\nå¯¹äºæ— çŠ¶æ€ç»„ä»¶(å‡½æ•°å£°æ˜ï¼‰æˆ‘ä»¬å¯ä»¥è¿™ä¹ˆå†™ï¼š\n```jsx\nfunction Index() {\n    /* .... */\n}\nexport default withStyles(styles)(withRouter(keepaliveLifeCycle(Index))) \n\n```\n\n##### æ¨¡å‹ï¼šåµŒå¥—HOC\nå¯¹äºä¸éœ€è¦ä¼ é€’å‚æ•°çš„`HOC`ï¼Œæˆ‘ä»¬ç¼–å†™æ¨¡å‹æˆ‘ä»¬åªéœ€è¦åµŒå¥—ä¸€å±‚å°±å¯ä»¥ï¼Œæ¯”å¦‚`withRouter`\n\n```jsx\nfunction withRouter() {\n    return class wrapComponent extends React.Component {\n        /* ç¼–å†™é€»è¾‘ */\n    }\n}\n```\n\nå¯¹äºéœ€è¦å‚æ•°çš„`HOC`ï¼Œæˆ‘ä»¬éœ€è¦ä¸€å±‚ä»£ç†ï¼Œå¦‚ä¸‹ï¼š\n```jsx\nfunction connect (mapStateToProps) {\n    /* æ¥å—ç¬¬ä¸€ä¸ªå‚æ•° */\n    return function connectAdvance(wrapCompoent) {\n        /* æ¥å—ç»„ä»¶ */\n        return class WrapComponent extends React.Component {}\n    }\n}\n```\næˆ‘ä»¬çœ‹å‡ºä¸¤ç§`HOC`æ¨¡å‹å¾ˆç®€å•ï¼Œå¯¹äºä»£ç†å‡½æ•°ï¼Œå¯èƒ½æœ‰ä¸€å±‚ï¼Œå¯èƒ½æœ‰å¾ˆå¤šå±‚ï¼Œä¸è¿‡ä¸è¦æ€•ï¼Œæ— è®ºå¤šå°‘å±‚æœ¬è´¨ä¸Šéƒ½æ˜¯ä¸€æ ·çš„ï¼Œæˆ‘ä»¬åªéœ€è¦ä¸€å±‚ä¸€å±‚å‰¥ç¦»å¼€ï¼Œåˆ†æç»“æ„ï¼Œæ•´ä¸ª`HOC`ç»“æ„å’Œè„‰ç»œå°±ä¼šæ¸…æ™°å¯è§ã€‚åƒé€`HOC`ä¹Ÿå°±æ˜“å¦‚åæŒã€‚\n\n#### ä¸¤ç§ä¸åŒçš„é«˜é˜¶ç»„ä»¶\nå¸¸ç”¨çš„é«˜é˜¶ç»„ä»¶æœ‰ä¸¤ç§æ–¹å¼**æ­£å‘çš„å±æ€§ä»£ç†**å’Œ**åå‘çš„ç»„ä»¶ç»§æ‰¿**ï¼Œä¸¤è€…ä¹‹å‰æœ‰ä¸€äº›å…±æ€§å’ŒåŒºåˆ«ã€‚æ¥ä¸‹å…·ä½“ä»‹ç»ä¸¤è€…åŒºåˆ«ï¼Œåœ¨ä¸‹æ–‡ä¼šè¯¦ç»†ä»‹ç»å…·ä½“å®ç°ã€‚\n\n##### æ­£å‘å±æ€§ä»£ç†\næ‰€è°“æ­£å‘å±æ€§ä»£ç†ï¼Œå°±æ˜¯ç”¨ç»„ä»¶åŒ…è£¹ä¸€å±‚ä»£ç†ç»„ä»¶ï¼Œåœ¨ä»£ç†ç»„ä»¶ä¸Šï¼Œæˆ‘ä»¬å¯ä»¥åšä¸€äº›ï¼Œå¯¹æºç»„ä»¶çš„ä»£ç†æ“ä½œã€‚åœ¨`fiber tree`ä¸Šï¼Œå…ˆ`mounted`ä»£ç†ç»„ä»¶ï¼Œç„¶åæ‰æ˜¯æˆ‘ä»¬çš„ä¸šåŠ¡ç»„ä»¶ã€‚æˆ‘ä»¬å¯ä»¥ç†è§£ä¸ºçˆ¶å­ç»„ä»¶å…³ç³»ï¼Œçˆ¶ç»„ä»¶å¯¹å­ç»„ä»¶è¿›è¡Œä¸€ç³»åˆ—å¼ºåŒ–æ“ä½œã€‚\n\n###### ä¼˜ç‚¹\n1. æ­£å¸¸å±æ€§ä»£ç†å¯ä»¥å’Œä¸šåŠ¡ç»„ä»¶ä½è€¦åˆï¼Œé›¶è€¦åˆï¼Œå¯¹äºæ¡ä»¶æ¸²æŸ“å’Œ`props`å±æ€§å¢å¼º,åªè´Ÿè´£æ§åˆ¶å­ç»„ä»¶æ¸²æŸ“å’Œä¼ é€’é¢å¤–çš„`props`å°±å¯ä»¥ï¼Œæ‰€ä»¥æ— é¡»çŸ¥é“ï¼Œä¸šåŠ¡ç»„ä»¶åšäº†äº›ä»€ä¹ˆã€‚æ‰€ä»¥æ­£å‘å±æ€§ä»£ç†ï¼Œæ›´é€‚åˆåšä¸€äº›å¼€æºé¡¹ç›®çš„`HOC`ï¼Œç›®å‰å¼€æºçš„HOCåŸºæœ¬éƒ½æ˜¯é€šè¿‡è¿™ä¸ªæ¨¡å¼å®ç°çš„ã€‚\n2. åŒæ ·é€‚ç”¨äº`class`å£°æ˜ç»„ä»¶ï¼Œå’Œ`function`å£°æ˜çš„ç»„ä»¶ã€‚\n3. å¯ä»¥å®Œå…¨éš”ç¦»ä¸šåŠ¡ç»„ä»¶çš„æ¸²æŸ“,ç›¸æ¯”åå‘ç»§æ‰¿ï¼Œå±æ€§ä»£ç†è¿™ç§æ¨¡å¼ã€‚å¯ä»¥å®Œå…¨æ§åˆ¶ä¸šåŠ¡ç»„ä»¶æ¸²æŸ“ä¸å¦ï¼Œå¯ä»¥é¿å…åå‘ç»§æ‰¿å¸¦æ¥ä¸€äº›å‰¯ä½œç”¨ï¼Œæ¯”å¦‚ç”Ÿå‘½å‘¨æœŸçš„æ‰§è¡Œã€‚\n4. å¯ä»¥åµŒå¥—ä½¿ç”¨ï¼Œ`HOC`ï¼Œè€Œä¸”ä¸€èˆ¬ä¸ä¼šé™åˆ¶åŒ…è£…`HOC`çš„å…ˆåé¡ºåºã€‚\n\n###### ç¼ºç‚¹\n1. ä¸€èˆ¬æ— æ³•ç›´æ¥è·å–ä¸šåŠ¡ç»„ä»¶çš„çŠ¶æ€ï¼Œå¦‚æœæƒ³è¦è·å–ï¼Œéœ€è¦`ref`è·å–ç»„ä»¶å®ä¾‹ã€‚\n2. æ— æ³•ç›´æ¥ç»§æ‰¿é™æ€å±æ€§ã€‚å¦‚æœéœ€è¦ç»§æ‰¿éœ€è¦æ‰‹åŠ¨å¤„ç†ï¼Œæˆ–è€…å¼•å…¥ç¬¬ä¸‰æ–¹åº“ã€‚\n\n```jsx\nclass Index extends React.Component {\n  render() {\n    return <div> hello,world  </div>\n  }\n}\nIndex.say = function(){\n  console.log('my name is alien')\n}\nfunction HOC(Component) {\n  return class wrapComponent extends React.Component{\n     render(){\n       return <Component { ...this.props } { ...this.state } />\n     }\n  }\n}\nconst newIndex =  HOC(Index) \nconsole.log(newIndex.say)\n```\n![](https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/7c907c7605494955b4d5b8170f847a68~tplv-k3u1fbpfcp-watermark.image)\n\n##### åå‘ç»§æ‰¿\n\n##### ä¼˜ç‚¹\n1. æ–¹ä¾¿è·å–ç»„ä»¶å†…éƒ¨çŠ¶æ€ï¼Œæ¯”å¦‚`state`ï¼Œ`props`,ç”Ÿå‘½å‘¨æœŸ,ç»‘å®šçš„äº‹ä»¶å‡½æ•°ç­‰\n2. `es6`ç»§æ‰¿å¯ä»¥è‰¯å¥½ç»§æ‰¿é™æ€å±æ€§ã€‚æˆ‘ä»¬æ— é¡»å¯¹é™æ€å±æ€§å’Œæ–¹æ³•è¿›è¡Œé¢å¤–çš„å¤„ç†ã€‚\n\n##### ç¼ºç‚¹\n1. æ— çŠ¶æ€ç»„ä»¶æ— æ³•ä½¿ç”¨ã€‚\n2. å’Œè¢«åŒ…è£…çš„ç»„ä»¶å¼ºè€¦åˆï¼Œéœ€è¦çŸ¥é“è¢«åŒ…è£…çš„ç»„ä»¶çš„å†…éƒ¨çŠ¶æ€ï¼Œå…·ä½“æ˜¯åšä»€ä¹ˆï¼Ÿ\n3. å¦‚æœå¤šä¸ªåå‘ç»§æ‰¿`HOC`åµŒå¥—åœ¨ä¸€èµ·ï¼Œå½“å‰çŠ¶æ€ä¼šè¦†ç›–ä¸Šä¸€ä¸ªçŠ¶æ€ã€‚è¿™æ ·å¸¦æ¥çš„éšæ‚£æ˜¯éå¸¸å¤§çš„ï¼Œæ¯”å¦‚è¯´æœ‰å¤šä¸ª`componentDidMount`ï¼Œå½“å‰`componentDidMount`ä¼šè¦†ç›–ä¸Šä¸€ä¸ª`componentDidMount`ã€‚è¿™æ ·å‰¯ä½œç”¨ä¸²è”èµ·æ¥ï¼Œå½±å“å¾ˆå¤§ã€‚\n\n```jsx\nclass Index extends React.Component {\n  render() {\n    return <div> hello,world  </div>\n  }\n}\nIndex.say = function() {\n  console.log('my name is alien')\n}\nfunction HOC(Component) {\n  return class wrapComponent extends Component {\n  }\n}\nconst newIndex =  HOC(Index) \nconsole.log(newIndex.say)\n```\n\n![](https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/2619fd18f75d47e7b7991858aac0b10c~tplv-k3u1fbpfcp-watermark.image)\n\n#### å¦‚ä½•ç¼–å†™é«˜é˜¶ç»„ä»¶\n##### 1. å¼ºåŒ–props\n###### æ··å…¥props\nè¿™ä¸ªæ˜¯é«˜é˜¶ç»„ä»¶æœ€å¸¸ç”¨çš„åŠŸèƒ½ï¼Œæ‰¿æ¥ä¸Šå±‚çš„`props`,åœ¨æ··å…¥è‡ªå·±çš„`props`ï¼Œæ¥å¼ºåŒ–ç»„ä»¶ã€‚\n\n```jsx\n// æœ‰çŠ¶æ€ç»„ä»¶\nfunction classHOC(WrapComponent) {\n  return class Index extends React.Component {\n    state = {\n      name:'alien'\n    }\n    componentDidMount() {\n      console.log('HOC')\n    }\n    render() {\n      return <WrapComponent { ...this.props }  { ...this.state } />\n    }\n  }\n}\nfunction Index(props) {\n  const { name } = props\n  useEffect(() => {\n     console.log( 'index' )\n  }, [])\n  \n  return <div>\n    hello,world , my name is { name }\n  </div>\n}\n\nexport default classHOC(Index)\n\n// æ— çŠ¶æ€ç»„ä»¶\nfunction functionHoc(WrapComponent) {\n  return function Index(props) {\n    const [state , setState] = useState({ name: 'alien' })       \n    return <WrapComponent { ...props }  { ...state }/>\n  }\n}\n```\n##### 2. æŠ½ç¦»stateæ§åˆ¶æ›´æ–°\né«˜é˜¶ç»„ä»¶å¯ä»¥å°†`HOC`çš„`state`çš„é…åˆèµ·æ¥ï¼Œæ§åˆ¶ä¸šåŠ¡ç»„ä»¶çš„æ›´æ–°ã€‚è¿™ç§ç”¨æ³•åœ¨`react-redux`ä¸­`connect`é«˜é˜¶ç»„ä»¶ä¸­ç”¨åˆ°è¿‡ï¼Œç”¨äºå¤„ç†æ¥è‡ª`redux`ä¸­`state`æ›´æ”¹ï¼Œå¸¦æ¥çš„è®¢é˜…æ›´æ–°ä½œç”¨ã€‚\n```jsx\nfunction classHOC(WrapComponent) {\n  return class Idex extends React.Component {\n    constructor() {\n      super()\n      this.state = {\n        name: 'alien'\n      }\n    }\n    changeName(name) {\n      this.setState({ name })\n    }\n    render() {\n      return (\n        <WrapComponent \n          { ...this.props }  \n          { ...this.state } \n          changeName={this.changeName.bind(this)} \n        />\n      )\n    }\n  }\n}\nfunction Index(props){\n  const [value, setValue] = useState(null)\n  const { name, changeName } = props\n  return (\n    <div>\n      <div> hello,world, my name is { name }</div>\n        æ”¹å˜name <input onChange={(e)=> setValue(e.target.value)}/>\n        <button onClick={() => changeName(value)}>ç¡®å®š</button>\n    </div>\n  )\n}\n\nexport default classHOC(Index)\n```\n\n#### ç›¸å…³æ–‡ç« \n- [ã€Œreactè¿›é˜¶ã€ä¸€æ–‡åƒé€Reacté«˜é˜¶ç»„ä»¶(HOC) - æˆ‘ä¸æ˜¯å¤–æ˜Ÿäºº](https://juejin.cn/post/6940422320427106335)\n\n### 2. [å‰ç«¯ä¼˜ç§€å®è·µä¸å®Œå…¨æŒ‡å—](https://juejin.cn/post/6932647134944886797)\næœ¬æ–‡å…¶å®åº”è¯¥å«ï¼Œ`Web`ç”¨æˆ·ä½“éªŒè®¾è®¡æå‡æŒ‡å—ã€‚ \n\næ‰€è°“çš„ç”¨æˆ·ä½“éªŒè®¾è®¡ï¼Œå…¶å®æ˜¯ä¸€ä¸ªæ¯”è¾ƒè™šçš„æ¦‚å¿µï¼Œæ˜¯ç§‰æ‰¿ç€ä»¥ç”¨æˆ·ä¸ºä¸­å¿ƒçš„æ€æƒ³çš„ä¸€ç§è®¾è®¡æ‰‹æ®µï¼Œä»¥ç”¨æˆ·éœ€æ±‚ä¸ºç›®æ ‡è€Œè¿›è¡Œçš„è®¾è®¡ã€‚è®¾è®¡è¿‡ç¨‹æ³¨é‡ä»¥ç”¨æˆ·ä¸ºä¸­å¿ƒï¼Œç”¨æˆ·ä½“éªŒçš„æ¦‚å¿µä»å¼€å‘çš„æœ€æ—©æœŸå°±å¼€å§‹è¿›å…¥æ•´ä¸ªæµç¨‹ï¼Œå¹¶è´¯ç©¿å§‹ç»ˆã€‚ è‰¯å¥½çš„ç”¨æˆ·ä½“éªŒè®¾è®¡â€¦\n\n#### ç›¸å…³æ–‡ç« \n- [å‰ç«¯ä¼˜ç§€å®è·µä¸å®Œå…¨æŒ‡å—](https://juejin.cn/post/6932647134944886797)\n\n## 30 seconds of code\n### ç›®æ ‡\nè®¡ç®—ä¸¤ä¸ªæ•°ç»„çš„ç¬›å¡å°”ç§¯ã€‚\n\n### æ ·ä¾‹è¾“å‡º: \n```js\nconst cartesianProduct = (a, b) =>\n  a.reduce((p, x) => [...p, ...b.map(y => [x, y])], []);\n```\n### å‚è€ƒå®ç°\n```js\ncartesianProduct(['x', 'y'], [1, 2]);\n// [['x', 1], ['x', 2], ['y', 1], ['y', 2]]\n```\n## æ¯æ—¥ä¸€é—®\n> ä»¥ä¸‹ä»£ç çš„è¿è¡Œç»“æœä¸º\n\n```js\n if ('http://giftwrapped.com/picture.jpg'.match('.gif')) {\n  'a gif file'\n} else {\n  'not a gif file'\n}\n```\n\n## æ¯æ—¥äºŒé—®\n> ä»¥ä¸‹ä»£ç çš„è¿è¡Œç»“æœä¸º\n\n```js\n[,,,].join(\",\")\n```\n\n### ä¸ŠæœŸçš„ç­”æ¡ˆ\n#### ç¬¬ä¸€é¢˜\n> ä»¥ä¸‹ä»£ç çš„è¿è¡Œç»“æœä¸º\n\n```js\n var val = 'smtg';\n console.log('Value is ' + (val === 'smtg') ? 'Something' : 'Nothing');\n\n```\n\n- ç­”æ¡ˆï¼šSomething\n- è§£æï¼šå­—ç¬¦ä¸²è¿æ¥æ¯”ä¸‰å…ƒè¿ç®—æœ‰æ›´é«˜çš„ä¼˜å…ˆçº§ \n     æ‰€ä»¥åŸé¢˜ç­‰ä»·äº 'Value is true' ? 'Somthing' : 'Nonthing' \n     è€Œä¸æ˜¯ 'Value   is' + (true ? 'Something' : 'Nonthing')\n- å·©å›ºï¼š[Like Sunday, Like Rain - JavaScriptè¿ç®—ç¬¦ä¼˜å…ˆçº§](https://juejin.cn/post/6844903620882726920/)\n```\n    1 || fn() && fn()   //1  \n    1 || 1 ? 2 : 3 ;    //2  \n```\n#### ç¬¬äºŒé¢˜\n> ä»¥ä¸‹ä»£ç çš„è¿è¡Œç»“æœä¸º\n\n```js\nNumber.MIN_VALUE > 0\n```\n\n- ç­”æ¡ˆï¼štrue\n- è§£æï¼šMIN_VALUE å±æ€§æ˜¯ JavaScript ä¸­å¯è¡¨ç¤ºçš„æœ€å°çš„æ•°ï¼ˆæ¥è¿‘ 0 ï¼Œä½†ä¸æ˜¯è´Ÿæ•°ï¼‰ã€‚å®ƒçš„è¿‘ä¼¼å€¼ä¸º 5 x 10-324ã€‚\n\n","tags":[],"folderPathname":"/weekly","data":{},"createdAt":"2021-03-23T12:52:11.496Z","updatedAt":"2021-04-13T13:13:57.615Z","trashed":false,"_rev":"c0yx-Lvou"}