{"title":"React类型检查","content":"React类型检查\n==\n\n## TS\nhttps://zhongsp.gitbooks.io/typescript-handbook/content/doc/handbook/Utility%20Types.html\n\n```ts\ntype Partial<T> = { [P in keyof T]?: T[P] };\ntype Required<T> = { [P in keyof T]-?: T[P] };\ntype Pick<T, K extends keyof T> = { [P in K]: T[P] };\ntype Exclude<T, U> = T extends U ? never : T;\ntype Omit = Pick<T, Exclude<keyof T, K>>\ntype Omit<T, K> = Pick<T, Exclude<keyof T, K>>;\n```\n\n## 函数组件\n\n- 使用`FC`类型进行函数组件声明\n  - `FC`是`FunctionComponent`的简写\n\n```tsx\n\ninterface IProps {\n  name: string;\n}\n\nexport const Demo: React.FC<IProps> = ({ name = 'wuw' }) => {\n  return <h2>Hi {name}</h2>\n}\n\n```\n\n- 使用函数声明\n\n```tsx\n\ninterface IProps {\n  id: string;\n}\n\nexport function Demo(props: IProps) {\n  return <h2>Hi ~</h2>\n}\n\n```\n\n- 泛型函数组件\n\n```tsx\ninterface ListProps<T> {\n  list: T[],\n  renderItem: (v: T, ind: number) => React.ReactNode\n}\n\nconst Test = () => ({\n  <List \n    list={['wuw', 'plom']}\n    renderItem={(v, i) => {\n      //\n    }}\n  />\n})\n\n```\n\n- 子组件声明\n> 使用`Parent.Child`形式表示父子节点关系， 例如`antd`的`Select.Option`\n\n```tsx\n\ninterface CardProps {}\ninterface CardItemProps {}\n\nexport function Card(props: React.PropsWithChildren<CardProps>) {\n  return <></>\n}\n\nCard.Item = (props: React.PropsWithChildren<CardItemProps>) => ({\n  \n})\n```\n\n## 类组件\n- `Component` 和  `PrueComponentre`\n```tsx\nimport React, { Component } from 'react'\nimport { connect } from 'dva';\n\nimport { UmiComponentProps } from '@/common/type'\n\nimport Details from './components/details'\n\ninterface PageProps {\n  details: any;\n}\n\ninterface State {\n\n}\n\ntype Props = PageProps & UmiComponentProps;\n\n@connect(({ owner }) => ({\n  details: owner.details || {}\n}))\nclass Info extends Component<Props, State> {\n\n  readonly state:State = {\n    data: {},\n  }\n\n  componentDidMount() {\n    const { dispatch } = this.props;\n    dispatch({ type: 'owner/queryInfo' })\n  }\n\n  render() {\n    const { details } = this.props;\n    \n    return (\n      <>\n        <Details data={details}/>\n      </>\n    );\n  }\n}\n\nexport default Info;\n```\n\n## 高阶组件\n```tsx\nimport React from 'react'\n\ntype HOC<InjectedProps, OwnProps = {}> = <P>(\n  Component: React.ComponentType<P & InjectedProps>,\n) => React.ComponentType<P & OwnProps>\n\ninterface IProps {\n  primary: string;\n  secondary: string;\n}\n\nexport const withTheme: HOC<IProps> = Component => props => {\n  const myTheme: IProps = {\n    primary: 'red',\n    secondary: 'blue',\n  };\n  return <Component {...myTheme} {...props} />;\n};\n\nexport default WithThem;\n\n\n## `styled-component`\n```ts\nconst Card = styled.section<{isNew?: boolean}>`\n  color: ${props => props.isNew ? 'red' : 'green'}\n`\n```\n\n---\n\nReact.ReactNode 是 ReactElement + 原始 JS 类型的合集\nconst styles: React.CSSProperties = {}\nconst inputEl = useRef<HTMLInputElement>(null);","tags":[],"folderPathname":"/font/react","data":{},"createdAt":"2020-08-07T02:54:40.540Z","updatedAt":"2020-11-25T06:26:46.227Z","trashed":false,"_id":"note:oFf_gkzju","_rev":"21-d626c92dd64a82c099b9f3a476160e50"}