{"title":"commander.js","content":"`commander`\n==\n> node.js命令行界面的完整解决方案\n\n- [笔记](https://github.com/tj/commander.js/blob/master/Readme_zh-CN.md)\n- [笔记](https://juejin.cn/post/6844903857324064782#heading-8)\n\n## 特性\n- 参数解析\n- 强制多态\n- 可变参数\n- Git 风格的子命令\n- 自动化帮助信息\n- 自定义帮助等\n\n## API\n### `version`\n```js\nvar program = require('commander');\n \nprogram\n    .version('0.0.1')\n    .parse(process.argv);\n\n// 如果希望程序响应-v选项而不是-V选项，\n// 只需使用与option方法相同的语法将自定义标志传递给version方法\nprogram\n  .version('0.0.1', '-v, --version')\n\t.parse(process.argv);\n```\n\n```shell\n$ node src/index.js -V \n# 0.0.1\n```\n\n### `option`\n> 使用`.option()`方法定义`commander`的选项`options`\n\n```js\n.option('-n, --name <items1> [items2]', 'name description', 'default value')\n```\n```js\n// index.js\nconst program = require('commander');\nprogram\n\t.version('1.0.0')\n\t.option('-a, --add', 'add Something')                  // 多个选项\n\t.option('-u, --update <fileName>', 'update Something') // 使用<>或[]\n\t.option('--add-file', 'add File')                      // 多个单词\n\t.option('--no-remove', 'not remove a file')            // --no\n  .parse(process.argv);\n\nconsole.log('You choose: ');\nif (program.add) console.log('  add Something');\nif (program.update) console.log('update file' + program.update);\nif (program.addFile) console.log('  add File');\n// if (program.remove) {\n//   console.log('  remove File') \n// } else{\n//   console.log('not remove a file')\n// }\n```\n\n```shell\n$ node src/index.js -a\n# You choose: add Something\n```\n\n### `command`\n> 自定义命令\n\n```js\n.command('add <num> [otherDirs...]', 'install description', opts)\n```\n- 使用`action`后会开启输入的选项校验，若输入了未定义的选项，则抛出错误\n```js\n// index.js\nconst program = require('commander');\nprogram\n  .version('1.0.0')\n  .command('my-cli <path>')\n  .option('-a, --add <fileName>', 'add a file')\n  .option('-u, --update <fileName>', 'update a file')\n  .option('-r, --remove <fileName>', 'remove a file')\n  .action(function (path, cmd) {\n    console.log(path+': '+cmd.add)\n  })\n  .parse(process.argv)\n\n```\n\n### `description` `useage`\n> 命令的描述\n\n```js\n// index.js\nconst program = require('commander');\nprogram\n\t.version('1.0.0')\n\t.usage('[options] <file ...>')\n\t.description('It is my cli')\n  .parse(process.argv);\n```\n\n```shell\n$ node src/index.js -h\nUsage: index [options] <file ...>\n\nIt is my cli\n\nOptions:\n  -V, --version  output the version number\n  -h, --help     display help for command\n```\n\n### `alias`\n> 别名\n```js\nprogram\n  .command('test [cmd]')\n  .alias('t')\n  .option('-c --choose <type>', 'choose type')\n  .description('call me wuw zhang')\n  .action(function(cmd, option){\n    console.log('test in \"%s\" is %s', cmd, option.choose);\n  })\n```\n\n```shell\n$ wuw t here -c bad\n# test in \"here\" is bad\n```\n\n### `action`\n> 定义命令的回调函数\n\n### `parse`\n> 用于解析process.argv\n","tags":[],"folderPathname":"/font/cli","data":{},"createdAt":"2020-11-20T07:58:30.611Z","updatedAt":"2020-11-20T09:35:53.526Z","trashed":false,"_id":"note:BG4t00RA8","_rev":"40-4b2e0cc031ed97ed62340c1e3cf8a721"}