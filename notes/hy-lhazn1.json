{"_id":"note:hy-lhazn1","title":"babel插件","content":"## 核心库\n### preset-env\n- @7 翻译语法，API\n  - stage(@6 翻译语法)\n  - babel-plugin-transform-runtime 或者 babel-polyfill（@6 翻译API）\n- 参数\n  - targets: 项目需要适配到的环境\n    - 根据浏览器的支持情况自动引入所需要的 polyfill\n  - useBuiltIns: \"usage\" | \"entry\" | false, defaults to false\n    - preset-env 如何处理 polyfills\n  - corejs：浏览器的 polyfill 都由它来管了\n\n使用 preset-env 注入的 polyfill 是会污染全局的，但是如果是自己的应用其实是在可控的。\n\n所以这里推荐业务项目这么使用`.babelrc`\n\n```js\n{\n  \"presets\": [\n    [\n      \"@babel/preset-env\",\n      {\n        \"targets\": {\n          \"chrome\": \"58\" // 按自己需要填写\n        },\n        \"useBuiltIns\": \"entry\",\n        \"corejs\": {\n          \"version\": 3,\n          \"proposals\": true\n        }\n      }\n    ]\n  ],\n  \"plugins\": []\n}\nimport 'core-js/stable';\nimport 'regenerator-runtime/runtime';\n// 入口文件代码\n```\n\n### @babel/plugin-transform-runtime\n是复用 babel 注入的关联代码\n\n### babel-polyfills\n\n---\n### 项目\n```js\n{\n  \"presets\": [\n    [\n      \"@babel/preset-env\",\n      {\n        \"targets\": {\n          \"chrome\": 58\n        },\n        \"useBuiltIns\": \"entry\",\n        \"corejs\": {\n          \"version\": 3,\n          \"proposals\": true\n        }\n      }\n    ]\n  ],\n  \"plugins\": [\n    [\n      \"@babel/plugin-transform-runtime\",\n      {\n        \"corejs\": false\n      }\n    ]\n  ]\n}\n\nimport 'core-js/stable';\nimport 'regenerator-runtime/runtime';\n// 入口文件代码\n```\n\n### library\n```js\n{\n  \"presets\": [\n    [\n      \"@babel/preset-env\",\n    ]\n  ],\n  \"plugins\": [\n    [\n      \"@babel/plugin-transform-runtime\",\n      {\n        \"corejs\": {\n          \"version\": 3,\n          \"proposals\": true\n        }\n      }\n    ]\n  ]\n}\n```\n--\n## 插件\n\n- [AST](https://astexplorer.net/)\n- [demo](https://github.com.cnpmjs.org/Vincedream/babel-plugin-demo.git)\n- [文档](https://github.com/jamiebuilds/babel-handbook/blob/master/translations/zh-Hans/plugin-handbook.md#toc-visitors)\n\n\n```shell\nyarn add -D eslint\nnpx eslint --init\n```","tags":[],"folderPathname":"/font/workflow","data":{},"createdAt":"2021-03-29T10:18:43.035Z","updatedAt":"2021-06-28T03:49:43.930Z","trashed":false,"_rev":"A1Ko3i-tJ"}